{% assign asset-name = page.title | remove: " -" | replace: " ", "-" | downcase %}

{% assign img-path = site.asset-img-path | append: asset-name %}

{% assign download-path = site.asset-download-path | append: asset-name %}

{% include downloader.html %}

<section class="pay-buttons" data-toggle="button">

	<button
		id="pay-button"
		class="snipcart-add-item pay"
		data-item-name="{{page.name}}"
		data-item-id="{{page.id}}-test"
		data-item-image="{{site.github.url}}{{img-path}}/{{page.one-third-img}}"
		data-item-description="{{page.description}}"
		data-item-url="{{site.github.url}}{{page.url}}"
		data-item-max-quantity="1"
		data-item-price="5"
		data-item-custom1-name="Price"
		data-item-custom1-options="$2[-3.00]|$5|$10[+5.00]|$20[+15.00]">
		Pay what you want!
	</button>

	<script>
	$(function() {
		updatePayAmount("5");
	});

	/*
	function onAddItem () {
		//Snipcart.api.items.clear();
	}
	*/

	Snipcart.subscribe('cart.ready', function (data) {
		Snipcart.api.cart.billingAddress({
			"name": "",
			"email": "",
			"address1": " ",
			"address2": " ",
			"city": "",
			"province": "",
			"country": "",
			"company": " ",
			"postalCode": " "
		})
	});

	function updatePayAmount(amount) {

		var payButton = $('#pay-button');

		var payButtonElement = document.getElementById( 'pay-button' );
		var freeButtonElement = document.getElementById( 'pay-button-free' );

		if (amount > 0) {
			payButton.data('item-custom1-value', "$" + amount);

			payButtonElement.style.display = 'block';
			freeButtonElement.style.display = 'none';
		} else {
			payButtonElement.style.display = 'none';
			freeButtonElement.style.display = 'block';
		}
	}

	Snipcart.api.configure('allowed_provinces', [
		{ country: 'US', provinces: [''] },
		{ country: 'CA', provinces: [''] },
	]);

	Snipcart.execute('registerLocale', 'en', {
    "my_cart": "Dev Assets",
    "my_cart_content": "Selected Asset",
    "billing_address": "About Me",
    "confirm_order": "Confirm",
    "payment_method_card_exp_month": "Expiration month",
    "finalize": "Support Now",
    "thankyou_message": "Thank you for supporting! Your invoice has been sent to you by email, you should receive it soon.",
    "notifications_item_not_added_due_to_max_quantity": "You already have that item selected."
	});

	Snipcart.subscribe('order.completed', function (data) {
		openDownloadModal();
	});

	</script>

	<button
		id="pay-button-free"
		class="pay"
		style="display: none;"
		onclick="Download()">
		Grab it for free!
	</button>

	<label class="btn btn-primary"><input type="radio" value="0" name="options" id="5" autocomplete="off" onclick="updatePayAmount(this.value)"><span>$0</span>
	</label>

	<label class="btn btn-primary"><input type="radio" value="20" name="options" id="4" autocomplete="off" onclick="updatePayAmount(this.value)"><span>$20</span>
	</label>

	<label class="btn btn-primary"><input type="radio" value="10" name="options" id="3" autocomplete="off" onclick="updatePayAmount(this.value)"><span>$10</span>
	</label>

	<label class="btn btn-primary active"><input type="radio" value="5" name="options" id="2" autocomplete="off" onclick="updatePayAmount(this.value)" checked><span>$5</span>
	</label>

	<label class="btn btn-primary"><input type="radio" value="2" name="options" id="1" autocomplete="off" onclick="updatePayAmount(this.value)"><span>$2</span>
	</label>

</section>